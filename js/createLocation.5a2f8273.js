(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["createLocation"],{a0e6:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("b-container",{staticClass:"my-5"},[r("b-breadcrumb",[r("b-breadcrumb-item",{attrs:{to:"/dashboard"}},[e._v(" "+e._s(e.$t("dashboard.dashboard"))+" ")]),r("b-breadcrumb-item",{attrs:{to:"/locations"}},[e._v(" "+e._s(e.$t("location.locationsList"))+" ")]),r("b-breadcrumb-item",{attrs:{active:"",to:"/locations/create"}},[e._v(" "+e._s(e.$t("location.createNewLocation"))+" ")])],1),r("h1",{staticClass:"h1"},[e._v(" "+e._s(e.$t("location.createNewLocation"))+" ")]),r("ErrorAlert",{attrs:{"request-info":e.requestInfo}}),r("form",{on:{submit:function(t){return t.preventDefault(),e.handleCreateLocation(t)}}},[r("b-form-group",{attrs:{id:"input-group-address",label:e.$t("location.address"),"label-for":"address"}},[r("b-form-input",{attrs:{id:"address",type:"text",name:"address",required:""},model:{value:e.address,callback:function(t){e.address=t},expression:"address"}})],1),r("b-form-group",{attrs:{id:"input-group-coordinates",label:e.$t("location.coordinates"),description:e.$t("location.coordinatesDescription")}},[r("GmapMap",{ref:"map",staticStyle:{width:"100%",height:"300px"},attrs:{center:{lat:-34.90385708261236,lng:-58.20926714017421},zoom:9},on:{click:e.handleMapClick}},[e.selectedPosition.lat&&e.selectedPosition.lng?r("GmapMarker",{attrs:{position:e.selectedPosition}}):e._e()],1)],1),r("b-button",{attrs:{variant:"primary",size:"lg",type:"submit",disabled:e.requestInfo.loading}},[e._v(" "+e._s(e.$t("location.submitCreate"))+" ")]),r("b-button",{attrs:{variant:"text",size:"lg"},on:{click:e.handleCancel}},[e._v(" "+e._s(e.$t("location.cancel"))+" ")])],1)],1)},n=[],o=(r("bf19"),r("96cf"),r("1da1")),s=r("cc8b"),i=r("e61d"),c=r("ee46"),u={name:"LocationsCreate",components:{ErrorAlert:c["a"]},data:function(){return{requestInfo:{loading:!1,error:!1,errorMessageKey:"",errorAdditionalInfo:""},address:"",selectedPosition:{lat:null,lng:null}}},methods:{handleMapClick:function(e){this.selectedPosition=e.latLng.toJSON()},handleCreateLocation:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r={address:e.address,latitude:e.selectedPosition.lat,longitude:e.selectedPosition.lng},e.requestInfo={loading:!0,error:!1,errorMessageKey:"",errorAdditionalInfo:""},t.prev=2,t.next=5,Object(s["a"])(r);case 5:a=t.sent,e.$store.dispatch("user/addLocation",a.data),e.$root.$bvToast.toast(e.$t("location.createSuccess"),i["a"]),e.$router.back(),t.next=16;break;case 11:t.prev=11,t.t0=t["catch"](2),console.error(t.t0),e.requestInfo.error=!0,e.requestInfo.errorMessageKey="app.requestError";case 16:return t.prev=16,e.requestInfo.loading=!1,t.finish(16);case 19:case"end":return t.stop()}}),t,null,[[2,11,16,19]])})))()},handleCancel:function(){this.$router.back()}}},l=u,d=r("2877"),p=Object(d["a"])(l,a,n,!1,null,null,null);t["default"]=p.exports},a93f:function(e,t,r){"use strict";r.d(t,"a",(function(){return s}));var a=r("4360"),n=r("bc3a").default,o=a["a"].state.auth.token,s=n.create({baseURL:"https://dapp-grupob-2020-c1-backend.herokuapp.com/",headers:{Authorization:"Bearer ".concat(o),Accept:"application/json","Content-Type":"application/json"}})},bf19:function(e,t,r){"use strict";var a=r("23e7");a({target:"URL",proto:!0,enumerable:!0},{toJSON:function(){return URL.prototype.toString.call(this)}})},cc8b:function(e,t,r){"use strict";r.d(t,"b",(function(){return o})),r.d(t,"a",(function(){return i})),r.d(t,"c",(function(){return u}));r("96cf");var a=r("1da1"),n=r("a93f");function o(){return s.apply(this,arguments)}function s(){return s=Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(n["a"])({method:"GET",url:"/user/me"}));case 1:case"end":return e.stop()}}),e)}))),s.apply(this,arguments)}function i(e){return c.apply(this,arguments)}function c(){return c=Object(a["a"])(regeneratorRuntime.mark((function e(t){var r,a,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t.address,a=t.latitude,o=t.longitude,e.abrupt("return",Object(n["a"])({method:"POST",url:"/user/location",params:{address:r,latitude:String(a),longitude:String(o)}}));case 2:case"end":return e.stop()}}),e)}))),c.apply(this,arguments)}function u(){return l.apply(this,arguments)}function l(){return l=Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(n["a"])({method:"GET",url:"/user/myshops"}));case 1:case"end":return e.stop()}}),e)}))),l.apply(this,arguments)}},ee46:function(e,t,r){"use strict";var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("b-alert",{attrs:{variant:"danger",show:!!e.requestInfo.error,dismissible:""}},[r("p",{staticClass:"my-1"},[e._v(" "+e._s(e.$t(e.requestInfo.errorMessageKey))+". "),e.requestInfo.errorAdditionalInfo?r("span",{directives:[{name:"b-toggle",rawName:"v-b-toggle.error-details",modifiers:{"error-details":!0}}]},[e._v("Ver Detalles.")]):e._e()]),r("b-collapse",{staticClass:"mt-2",attrs:{id:"error-details"}},[e._v(" "+e._s(e.requestInfo.errorAdditionalInfo)+" ")])],1)},n=[],o={name:"ErrorAlert",props:["requestInfo"]},s=o,i=r("2877"),c=Object(i["a"])(s,a,n,!1,null,null,null);t["a"]=c.exports}}]);
//# sourceMappingURL=createLocation.5a2f8273.js.map