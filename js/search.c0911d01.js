(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["search"],{"2d3b":function(t,e,r){"use strict";r.r(e);var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("b-container",{staticClass:"my-5"},[r("b-breadcrumb",[r("b-breadcrumb-item",{attrs:{to:"/dashboard"}},[t._v(" "+t._s(t.$t("dashboard.dashboard"))+" ")]),r("b-breadcrumb-item",{attrs:{active:"",to:"/search"}},[t._v(" "+t._s(t.$t("search.searchProducts"))+" ")])],1),r("h1",{staticClass:"h1"},[t._v(" "+t._s(t.$t("search.searchProducts"))+" ")]),r("ErrorAlert",{attrs:{"request-info":t.requestInfo}}),r("b-card",[r("form",{on:{submit:function(e){return e.preventDefault(),t.handleSearch(e)}}},[r("b-input-group",{scopedSlots:t._u([{key:"append",fn:function(){return[r("b-button",{attrs:{block:"",variant:"primary",type:"submit"}},[t._v(" "+t._s(t.$t("search.beginSearch"))+" ")])]},proxy:!0}])},[r("b-form-input",{attrs:{id:"query",name:"query"},model:{value:t.searchQuery,callback:function(e){t.searchQuery=e},expression:"searchQuery"}})],1),r("h3",{directives:[{name:"b-toggle",rawName:"v-b-toggle.search-options",modifiers:{"search-options":!0}}],staticClass:"h5 mt-2"},[t._v(" "+t._s(t.$t("search.searchOptions"))+" ")]),r("b-collapse",{attrs:{id:"search-options"}},[r("b-form-group",{attrs:{label:"Ubicaci√≥n"}},[r("b-form-radio-group",{attrs:{id:"radio-location",options:t.userLocationsList,"value-field":"id","text-field":"address",name:"location"},model:{value:t.selectedLocation,callback:function(e){t.selectedLocation=e},expression:"selectedLocation"}})],1)],1)],1)]),t.searchStarted?r("div",{staticClass:"my-3"},[r("h2",{staticClass:"h3"},[t._v(t._s(t.$t("search.searchResults")))]),t.searchResults.length?r("b-list-group",t._l(t.searchResults,(function(t){return r("b-list-group-item",{key:t.name},[r("ProductDetails",{attrs:{product:t,buy:""}})],1)})),1):r("b-alert",{staticClass:"m-0",attrs:{show:""}},[t._v(" "+t._s(t.$t("product.listEmpty"))+" ")])],1):t._e()],1)},s=[],n=(r("96cf"),r("1da1")),o=r("966e"),c=r("a635"),i=r("ee46"),u=r("cc8b"),d={name:"Search",components:{ErrorAlert:i["a"],ProductDetails:c["a"]},data:function(){return{requestInfo:{loading:!1,error:!1,errorMessageKey:"",errorAdditionalInfo:""},searchStarted:!1,searchQuery:"",searchResults:[],selectedLocation:null}},mounted:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(u["d"])();case 2:r=e.sent,t.$store.commit("user/setLocations",r.data),t.selectedLocation=t.userLocationsList[0].id||null;case 5:case"end":return e.stop()}}),e)})))()},computed:{userLocationsList:function(){return this.$store.state.user.locations}},methods:{handleSearch:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){var r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.searchStarted=!0,r={locationId:t.selectedLocation,keyword:t.searchQuery},t.requestInfo={loading:!0,error:!1,errorMessageKey:"",errorAdditionalInfo:""},e.prev=3,e.next=6,Object(o["b"])(r);case 6:a=e.sent,t.searchResults=a.data,e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](3),t.requestInfo.error=!0;case 13:return e.prev=13,t.requestInfo.loading=!1,e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[3,10,13,16]])})))()}}},l=d,p=r("2877"),h=Object(p["a"])(l,a,s,!1,null,null,null);e["default"]=h.exports},"51af":function(t,e,r){"use strict";var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"shop-details"},[r("h2",{staticClass:"h3"},[t._v(t._s(t.shop.name))]),r("p",[t._v(t._s(t.shop.location.address))]),r("p",[t._v(t._s(t.$t("shop.deliveryRadius"))+": "+t._s(t.shop.deliveryRadius)+" Km")]),t.expanded?r("div",{staticClass:"shop-categories"},[r("h3",{staticClass:"h6"},[t._v(t._s(t.$t("shop.categories")))]),r("p",t._l(t.shop.categories,(function(e){return r("b-badge",{key:e,attrs:{variant:"secondary"}},[t._v(" "+t._s(e)+" ")])})),1),r("h3",{staticClass:"h6"},[t._v(t._s(t.$t("shop.paymentMethods")))]),r("p",t._l(t.shop.paymentMethods,(function(e){return r("b-badge",{key:e,attrs:{variant:"secondary"}},[t._v(t._s(e))])})),1),r("h3",{staticClass:"h6"},[t._v(t._s(t.$t("shop.openingDays")))]),r("p",[t._v(" "+t._s(t.shop.openingHour)+"-"+t._s(t.shop.closingHour)+", "),t._l(t.shop.days,(function(e){return r("b-badge",{key:e,attrs:{variant:"secondary"}},[t._v(t._s(e))])}))],2)]):t._e()])},s=[],n={name:"ShopDetails",props:{shop:{type:Object,required:!0},expanded:{type:Boolean,default:!1}}},o=n,c=r("2877"),i=Object(c["a"])(o,a,s,!1,null,null,null);e["a"]=i.exports},a635:function(t,e,r){"use strict";var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"product-details"},[r("div",{staticClass:"row"},[r("div",{staticClass:"col"},[r("h2",{staticClass:"h3"},[t._v(t._s(t.product.name))]),r("p",[t._v(t._s(t.product.brand))]),r("p",{staticClass:"lead"},[t._v(t._s(t.product.price))])]),t.product.shop?r("div",{staticClass:"col-md-6 col-lg-3"},[r("ShopDetails",{attrs:{shop:t.product.shop}})],1):t._e()]),t.buy?r("b-button",{attrs:{variant:"primary"},on:{click:t.handleAddToCart}},[t._v(" "+t._s(t.$t("product.addToCart"))+" ")]):t._e()],1)},s=[],n=(r("99af"),r("b0c0"),r("e61d")),o=r("51af"),c={name:"ProductDetails",components:{ShopDetails:o["a"]},props:{product:{type:Object,required:!0},buy:{type:Boolean,default:!1}},data:function(){return{quantity:1}},computed:{},methods:{handleAddToCart:function(){var t={product:this.product.name,quantity:this.quantity},e="".concat(t.quantity," x ").concat(t.product," ").concat(this.$t("product.addedToCart"));this.$store.dispatch("buyer/addItemToCart",t),this.$root.$bvToast.toast(e,n["a"])}}},i=c,u=r("2877"),d=Object(u["a"])(i,a,s,!1,null,null,null);e["a"]=d.exports},cc8b:function(t,e,r){"use strict";r.d(e,"c",(function(){return n})),r.d(e,"d",(function(){return c})),r.d(e,"a",(function(){return u})),r.d(e,"b",(function(){return l})),r.d(e,"e",(function(){return h}));r("96cf");var a=r("1da1"),s=r("a93f");function n(){return o.apply(this,arguments)}function o(){return o=Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",Object(s["a"])({method:"GET",url:"/user/me"}));case 1:case"end":return t.stop()}}),t)}))),o.apply(this,arguments)}function c(){return i.apply(this,arguments)}function i(){return i=Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",Object(s["a"])({method:"GET",url:"/user/locations"}));case 1:case"end":return t.stop()}}),t)}))),i.apply(this,arguments)}function u(t){return d.apply(this,arguments)}function d(){return d=Object(a["a"])(regeneratorRuntime.mark((function t(e){var r,a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.address,a=e.latitude,n=e.longitude,t.abrupt("return",Object(s["a"])({method:"POST",url:"/user/location",params:{address:r,latitude:String(a),longitude:String(n)}}));case 2:case"end":return t.stop()}}),t)}))),d.apply(this,arguments)}function l(t){return p.apply(this,arguments)}function p(){return p=Object(a["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",Object(s["a"])({method:"DELETE",url:"/user/location",params:{locationId:e}}));case 1:case"end":return t.stop()}}),t)}))),p.apply(this,arguments)}function h(){return b.apply(this,arguments)}function b(){return b=Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",Object(s["a"])({method:"GET",url:"/user/myshops"}));case 1:case"end":return t.stop()}}),t)}))),b.apply(this,arguments)}}}]);
//# sourceMappingURL=search.c0911d01.js.map